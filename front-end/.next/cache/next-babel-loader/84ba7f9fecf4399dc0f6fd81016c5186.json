{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport ToastContext from '../../contexts/toast';\nimport { generateUID } from '../../helpers/util';\nimport ToastItem from './toast-item';\n/* eslint-disable import/no-unassigned-import */\n\nimport '../../css/toast.css';\n/* eslint-enable import/no-unassigned-import */\n\nvar ToastProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ToastProvider, _React$Component);\n\n  function ToastProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ToastProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ToastProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      toasts: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"add\", function (_ref) {\n      var content = _ref.content,\n          link = _ref.link;\n\n      if (!content) {\n        return;\n      }\n\n      var id = generateUID();\n      return _this.setState(function (prev) {\n        var toast = prev.toasts.slice(0);\n        return _objectSpread({}, prev, {\n          toasts: [].concat(_toConsumableArray(toast), [{\n            content: content,\n            link: link,\n            id: id\n          }])\n        });\n      }, function () {\n        return setTimeout(function () {\n          return _this.remove({\n            id: id\n          });\n        }, _this.props.timeout);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"remove\", function (_ref2) {\n      var id = _ref2.id;\n\n      var toasts = _this.state.toasts.filter(function (i) {\n        return i.id !== id;\n      }).slice(0);\n\n      _this.setState(function (prev) {\n        return _objectSpread({}, prev, {\n          toasts: _toConsumableArray(toasts)\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"eventAddToast\", function (ev) {\n      return _this.add(ev.detail);\n    });\n\n    return _this;\n  }\n\n  _createClass(ToastProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      global.document.addEventListener('dispatch-toast', this.eventAddToast);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      global.document.removeEventListener('dispatch-toast', this.eventAddToast);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var toasts = this.state.toasts;\n      var add = this.add,\n          _remove = this.remove;\n      /* eslint-disable no-undef */\n\n      return React.createElement(ToastContext.Provider, {\n        value: {\n          add: add,\n          remove: _remove\n        }\n      }, process.browser ? createPortal(React.createElement(React.Fragment, null, toasts.map(function (_ref3) {\n        var id = _ref3.id,\n            rest = _objectWithoutProperties(_ref3, [\"id\"]);\n\n        return React.createElement(ToastItem, _extends({\n          key: id\n        }, rest, {\n          id: id,\n          remove: function remove() {\n            return _remove({\n              id: id\n            });\n          }\n        }));\n      })), document.querySelector('#toast-container')) : null, this.props.children);\n      /* eslint-enable no-undef */\n    }\n  }]);\n\n  return ToastProvider;\n}(React.Component);\n\n_defineProperty(ToastProvider, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  timeout: PropTypes.number\n});\n\n_defineProperty(ToastProvider, \"defaultProps\", {\n  timeout: 3000\n});\n\nexport default ToastProvider;","map":{"version":3,"sources":["/Users/admin/hackathon-project/dyslexic-learn/front-end/components/toast/index.js"],"names":["React","PropTypes","createPortal","ToastContext","generateUID","ToastItem","ToastProvider","toasts","content","link","id","setState","prev","toast","slice","setTimeout","remove","props","timeout","state","filter","i","ev","add","detail","global","document","addEventListener","eventAddToast","removeEventListener","process","browser","map","rest","querySelector","children","Component","node","isRequired","number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport ToastContext from '../../contexts/toast';\nimport { generateUID } from '../../helpers/util';\nimport ToastItem from './toast-item';\n\n/* eslint-disable import/no-unassigned-import */\nimport '../../css/toast.css';\n/* eslint-enable import/no-unassigned-import */\n\nclass ToastProvider extends React.Component {\n\tstate = {\n\t\ttoasts: [],\n\t};\n\n\tstatic propTypes = {\n\t\tchildren: PropTypes.node.isRequired,\n\t\ttimeout: PropTypes.number,\n\t};\n\n\tstatic defaultProps = {\n\t\ttimeout: 3000,\n\t};\n\n\tadd = ({ content, link }) => {\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = generateUID();\n\n\t\treturn this.setState(\n\t\t\tprev => {\n\t\t\t\tconst toast = prev.toasts.slice(0);\n\t\t\t\treturn { ...prev, toasts: [...toast, { content, link, id }] };\n\t\t\t},\n\t\t\t() => setTimeout(() => this.remove({ id }), this.props.timeout),\n\t\t);\n\t};\n\n\tremove = ({ id }) => {\n\t\tconst toasts = this.state.toasts.filter(i => i.id !== id).slice(0);\n\t\tthis.setState(prev => ({ ...prev, toasts: [...toasts] }));\n\t};\n\n\teventAddToast = ev => this.add(ev.detail);\n\n\tcomponentDidMount() {\n\t\tglobal.document.addEventListener('dispatch-toast', this.eventAddToast);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tglobal.document.removeEventListener('dispatch-toast', this.eventAddToast);\n\t}\n\n\trender() {\n\t\tconst { toasts } = this.state;\n\t\tconst { add, remove } = this;\n\t\t/* eslint-disable no-undef */\n\n\t\treturn (\n\t\t\t<ToastContext.Provider value={{ add, remove }}>\n\t\t\t\t{process.browser\n\t\t\t\t\t? createPortal(\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{toasts.map(({ id, ...rest }) => (\n\t\t\t\t\t\t\t\t\t<ToastItem key={id} {...rest} id={id} remove={() => remove({ id })} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>,\n\t\t\t\t\t\t\tdocument.querySelector('#toast-container'),\n\t\t\t\t\t  )\n\t\t\t\t\t: null}\n\t\t\t\t{this.props.children}\n\t\t\t</ToastContext.Provider>\n\t\t);\n\t\t/* eslint-enable no-undef */\n\t}\n}\n\nexport default ToastProvider;\n"]},"metadata":{},"sourceType":"module"}