{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport ToastContext from '../../contexts/toast';\nimport { generateUID } from '../../helpers/util';\nimport ToastItem from './toast-item';\n/* eslint-disable import/no-unassigned-import */\n\nimport '../../css/toast.css';\n/* eslint-enable import/no-unassigned-import */\n\nclass ToastProvider extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      toasts: []\n    });\n\n    _defineProperty(this, \"add\", ({\n      content,\n      link\n    }) => {\n      if (!content) {\n        return;\n      }\n\n      const id = generateUID();\n      return this.setState(prev => {\n        const toast = prev.toasts.slice(0);\n        return _objectSpread({}, prev, {\n          toasts: [...toast, {\n            content,\n            link,\n            id\n          }]\n        });\n      }, () => setTimeout(() => this.remove({\n        id\n      }), this.props.timeout));\n    });\n\n    _defineProperty(this, \"remove\", ({\n      id\n    }) => {\n      const toasts = this.state.toasts.filter(i => i.id !== id).slice(0);\n      this.setState(prev => _objectSpread({}, prev, {\n        toasts: [...toasts]\n      }));\n    });\n\n    _defineProperty(this, \"eventAddToast\", ev => this.add(ev.detail));\n  }\n\n  componentDidMount() {\n    global.document.addEventListener('dispatch-toast', this.eventAddToast);\n  }\n\n  componentWillUnmount() {\n    global.document.removeEventListener('dispatch-toast', this.eventAddToast);\n  }\n\n  render() {\n    const {\n      toasts\n    } = this.state;\n    const {\n      add,\n      remove\n    } = this;\n    /* eslint-disable no-undef */\n\n    return React.createElement(ToastContext.Provider, {\n      value: {\n        add,\n        remove\n      }\n    }, process.browser ? createPortal(React.createElement(React.Fragment, null, toasts.map((_ref) => {\n      let {\n        id\n      } = _ref,\n          rest = _objectWithoutProperties(_ref, [\"id\"]);\n\n      return React.createElement(ToastItem, _extends({\n        key: id\n      }, rest, {\n        id: id,\n        remove: () => remove({\n          id\n        })\n      }));\n    })), document.querySelector('#toast-container')) : null, this.props.children);\n    /* eslint-enable no-undef */\n  }\n\n}\n\n_defineProperty(ToastProvider, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  timeout: PropTypes.number\n});\n\n_defineProperty(ToastProvider, \"defaultProps\", {\n  timeout: 3000\n});\n\nexport default ToastProvider;","map":{"version":3,"sources":["/Users/admin/hackathon-project/dyslexic-learn/front-end/components/toast/index.js"],"names":["React","PropTypes","createPortal","ToastContext","generateUID","ToastItem","ToastProvider","Component","toasts","content","link","id","setState","prev","toast","slice","setTimeout","remove","props","timeout","state","filter","i","ev","add","detail","componentDidMount","global","document","addEventListener","eventAddToast","componentWillUnmount","removeEventListener","render","process","browser","map","rest","querySelector","children","node","isRequired","number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport ToastContext from '../../contexts/toast';\nimport { generateUID } from '../../helpers/util';\nimport ToastItem from './toast-item';\n\n/* eslint-disable import/no-unassigned-import */\nimport '../../css/toast.css';\n/* eslint-enable import/no-unassigned-import */\n\nclass ToastProvider extends React.Component {\n\tstate = {\n\t\ttoasts: [],\n\t};\n\n\tstatic propTypes = {\n\t\tchildren: PropTypes.node.isRequired,\n\t\ttimeout: PropTypes.number,\n\t};\n\n\tstatic defaultProps = {\n\t\ttimeout: 3000,\n\t};\n\n\tadd = ({ content, link }) => {\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = generateUID();\n\n\t\treturn this.setState(\n\t\t\tprev => {\n\t\t\t\tconst toast = prev.toasts.slice(0);\n\t\t\t\treturn { ...prev, toasts: [...toast, { content, link, id }] };\n\t\t\t},\n\t\t\t() => setTimeout(() => this.remove({ id }), this.props.timeout),\n\t\t);\n\t};\n\n\tremove = ({ id }) => {\n\t\tconst toasts = this.state.toasts.filter(i => i.id !== id).slice(0);\n\t\tthis.setState(prev => ({ ...prev, toasts: [...toasts] }));\n\t};\n\n\teventAddToast = ev => this.add(ev.detail);\n\n\tcomponentDidMount() {\n\t\tglobal.document.addEventListener('dispatch-toast', this.eventAddToast);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tglobal.document.removeEventListener('dispatch-toast', this.eventAddToast);\n\t}\n\n\trender() {\n\t\tconst { toasts } = this.state;\n\t\tconst { add, remove } = this;\n\t\t/* eslint-disable no-undef */\n\n\t\treturn (\n\t\t\t<ToastContext.Provider value={{ add, remove }}>\n\t\t\t\t{process.browser\n\t\t\t\t\t? createPortal(\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{toasts.map(({ id, ...rest }) => (\n\t\t\t\t\t\t\t\t\t<ToastItem key={id} {...rest} id={id} remove={() => remove({ id })} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>,\n\t\t\t\t\t\t\tdocument.querySelector('#toast-container'),\n\t\t\t\t\t  )\n\t\t\t\t\t: null}\n\t\t\t\t{this.props.children}\n\t\t\t</ToastContext.Provider>\n\t\t);\n\t\t/* eslint-enable no-undef */\n\t}\n}\n\nexport default ToastProvider;\n"]},"metadata":{},"sourceType":"module"}